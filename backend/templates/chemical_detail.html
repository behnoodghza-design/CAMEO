{% extends "base.html" %}

{% block title %}{{ chemical.name if chemical else 'Chemical Detail' }} - CAMEO Chemicals{% endblock %}

{% block content %}
<style>
    .nfpa-diamond-wrapper {
        width: 140px;
        height: 140px;
        margin: 0.75rem 1.75rem 0.75rem 0.75rem;
    }
    .nfpa-diamond {
        width: 100%;
        height: 100%;
        transform: rotate(45deg);
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        grid-template-rows: repeat(2, minmax(0, 1fr));
        border: 2px solid #475569;
        border-radius: 6px;
        overflow: hidden;
    }
    .nfpa-square {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 30px;
        font-weight: 700;
        color: #fff;
        border: 1px solid rgba(15, 23, 42, 0.2);
    }
    .nfpa-square span {
        transform: rotate(-45deg);
        display: inline-block;
    }
    .nfpa-health { background: #2563eb; }
    .nfpa-flam { background: #ef4444; }
    .nfpa-react { background: #eab308; color: #0f172a; }
    .nfpa-special { background: #fff; color: #0f172a; }
    .nfpa-special span {
        transform: none;
    }
    .nfpa-special-water span {
        text-decoration: line-through;
        text-decoration-thickness: 4px;
        text-decoration-color: #0f172a;
        text-decoration-skip-ink: none;
    }
    .nfpa-flex {
        display: flex;
        flex-wrap: wrap;
        align-items: flex-start;
        gap: 1.5rem;
    }
    .nfpa-legend {
        flex: 1 1 320px;
        display: grid;
        gap: 0.75rem;
        max-width: 520px;
    }
    @media (min-width: 768px) {
        .nfpa-legend {
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 1rem;
        }
    }
</style>
{% set nfpa_special_code = '' %}
{% set nfpa_special_label = chemical.nfpa_special if chemical else '' %}
{% set nfpa_special_description = chemical.nfpa_special if chemical else '' %}
{% if chemical and chemical.nfpa_special %}
    {% set _nfpa_special_map = {
        'oxidizer': {'code': 'OX', 'label': 'Oxidizer', 'description': 'Supports combustion; keep away from fuels.'},
        'oxidiser': {'code': 'OX', 'label': 'Oxidizer', 'description': 'Supports combustion; keep away from fuels.'},
        'ox': {'code': 'OX', 'label': 'Oxidizer', 'description': 'Supports combustion; keep away from fuels.'},
        'water reactive': {'code': 'W', 'label': 'No Water', 'description': 'Reacts violently or explosively with water.'},
        'reacts with water': {'code': 'W', 'label': 'No Water', 'description': 'Reacts violently or explosively with water.'},
        'water reactive - no water': {'code': 'W', 'label': 'No Water', 'description': 'Reacts violently or explosively with water.'},
        'no water': {'code': 'W', 'label': 'No Water', 'description': 'Reacts violently or explosively with water.'},
        'water': {'code': 'W', 'label': 'No Water', 'description': 'Reacts violently or explosively with water.'},
        'corrosive': {'code': 'COR', 'label': 'Corrosive', 'description': 'Causes rapid destruction of metal or tissue.'},
        'acid': {'code': 'ACID', 'label': 'Acid', 'description': 'Corrosive acid ‚Äì avoid contact with bases.'},
        'alkali': {'code': 'ALK', 'label': 'Alkali', 'description': 'Corrosive base ‚Äì avoid contact with acids.'},
        'alkaline': {'code': 'ALK', 'label': 'Alkali', 'description': 'Corrosive base ‚Äì avoid contact with acids.'},
        'simple asphyxiant': {'code': 'SA', 'label': 'Simple Asphyxiant', 'description': 'Displaces oxygen; ventilate confined spaces.'},
        'simple asphyxiant gas': {'code': 'SA', 'label': 'Simple Asphyxiant', 'description': 'Displaces oxygen; ventilate confined spaces.'},
        'radioactive': {'code': 'RAD', 'label': 'Radioactive', 'description': 'Emits ionizing radiation; control exposure.'},
        'polymerizable': {'code': 'P', 'label': 'Polymerizable', 'description': 'May polymerize explosively if not inhibited.'}
    } %}
    {% set _nfpa_special_normalized = chemical.nfpa_special | lower | trim %}
    {% set _nfpa_special_entry = _nfpa_special_map.get(_nfpa_special_normalized) %}
    {% if _nfpa_special_entry %}
        {% set nfpa_special_code = _nfpa_special_entry.code %}
        {% set nfpa_special_label = _nfpa_special_entry.label %}
        {% set nfpa_special_description = _nfpa_special_entry.description %}
    {% else %}
        {% set nfpa_special_code = (_nfpa_special_normalized.split(' ')[0][:4]).upper() %}
        {% set nfpa_special_label = chemical.nfpa_special %}
        {% set nfpa_special_description = chemical.nfpa_special %}
    {% endif %}
{% endif %}
{% if not chemical %}
<div class="max-w-5xl mx-auto px-4 py-12">
    <div class="bg-white rounded-xl shadow-lg p-8 text-center">
        <h1 class="text-3xl font-bold text-slate-900 mb-4">Chemical Not Found</h1>
        <p class="text-slate-600 mb-6">The requested chemical could not be found in the database.</p>
        <a href="/" class="inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
            ‚Üê Back to Mixer
        </a>
    </div>
</div>
{% else %}
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6" x-data="{ activeTab: 'general' }">
    
    <!-- Sticky Header -->
    <div class="sticky top-0 z-40 bg-white border-b border-slate-200 shadow-sm mb-6 -mx-4 px-4 py-4">
        <div class="max-w-7xl mx-auto">
            <div class="flex items-start justify-between gap-4">
                <div class="flex-1">
                    <div class="flex items-center gap-3 mb-2">
                        <a href="/" class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                            ‚Üê Back
                        </a>
                    </div>
                    <h1 class="text-3xl font-bold text-slate-900 mb-3">{{ chemical.name }}</h1>
                    
                    <!-- Badges -->
                    <div class="flex flex-wrap gap-2">
                        {% if chemical.cas_numbers %}
                            {% for cas in chemical.cas_numbers %}
                            <span class="inline-flex items-center gap-1 px-3 py-1 bg-blue-50 text-blue-700 text-sm font-medium rounded-full border border-blue-200">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
                                </svg>
                                CAS: {{ cas }}
                            </span>
                            {% endfor %}
                        {% endif %}
                        {% if chemical.un_numbers %}
                            {% for un in chemical.un_numbers %}
                            <span class="inline-flex items-center gap-1 px-3 py-1 bg-orange-50 text-orange-700 text-sm font-medium rounded-full border border-orange-200">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                                </svg>
                                UN: {{ un }}
                            </span>
                            {% endfor %}
                        {% endif %}
                        {% if chemical.dot_labels %}
                            <span class="inline-flex items-center gap-1 px-3 py-1 bg-red-50 text-red-700 text-sm font-medium rounded-full border border-red-200">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                                </svg>
                                {{ chemical.dot_labels }}
                            </span>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="flex gap-2">
                    <button class="px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 text-sm font-medium">
                        Print
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- NFPA Diamond Section -->
    {% if chemical.nfpa_health is not none or chemical.nfpa_flam is not none or chemical.nfpa_react is not none %}
    <div class="bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-6 mb-6 border border-slate-200">
        <h2 class="text-lg font-semibold text-slate-900 mb-4">NFPA 704 Diamond</h2>
        <div class="nfpa-flex">
            <!-- Visual Diamond -->
            <div class="nfpa-diamond-wrapper">
                <div class="nfpa-diamond">
                    <div class="nfpa-square nfpa-flam">
                        <span>{{ chemical.nfpa_flam if chemical.nfpa_flam is not none else '?' }}</span>
                    </div>
                    <div class="nfpa-square nfpa-react">
                        <span>{{ chemical.nfpa_react if chemical.nfpa_react is not none else '?' }}</span>
                    </div>
                    <div class="nfpa-square nfpa-health">
                        <span>{{ chemical.nfpa_health if chemical.nfpa_health is not none else '?' }}</span>
                    </div>
                    <div class="nfpa-square nfpa-special {{ 'nfpa-special-water' if nfpa_special_code == 'W' }}">
                        <span>{{ nfpa_special_code if chemical.nfpa_special else '' }}</span>
                    </div>
                </div>
            </div>
            
            <!-- Legend -->
            <div class="nfpa-legend">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-blue-500 rounded flex items-center justify-center text-white font-bold">{{ chemical.nfpa_health if chemical.nfpa_health is not none else '?' }}</div>
                    <div>
                        <p class="text-sm font-semibold text-slate-900">Health</p>
                        <p class="text-xs text-slate-600">{{ chemical.nfpa_source if chemical.nfpa_source else 'Not specified' }}</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-red-500 rounded flex items-center justify-center text-white font-bold">{{ chemical.nfpa_flam if chemical.nfpa_flam is not none else '?' }}</div>
                    <div>
                        <p class="text-sm font-semibold text-slate-900">Flammability</p>
                        <p class="text-xs text-slate-600">Flash Point: {{ chemical.fp_value }}¬∞F{% if chemical.fp_range %} ({{ chemical.fp_range }}){% endif %}</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-yellow-500 rounded flex items-center justify-center text-white font-bold">{{ chemical.nfpa_react if chemical.nfpa_react is not none else '?' }}</div>
                    <div>
                        <p class="text-sm font-semibold text-slate-900">Instability</p>
                        <p class="text-xs text-slate-600">Instability hazard</p>
                    </div>
                </div>
                {% if chemical.nfpa_special %}
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-white border-2 border-slate-300 rounded flex items-center justify-center text-slate-900 font-bold {{ 'nfpa-special-water' if nfpa_special_code == 'W' }}">
                        <span style="transform:none;">{{ nfpa_special_code }}</span>
                    </div>
                    <div>
                        <p class="text-sm font-semibold text-slate-900">Special</p>
                        <p class="text-xs text-slate-600">{{ nfpa_special_description }}</p>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Tabs Navigation -->
    <div class="border-b border-slate-200 mb-6">
        <nav class="flex gap-1" aria-label="Tabs">
            <button @click="activeTab = 'general'" :class="activeTab === 'general' ? 'border-blue-500 text-blue-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'" class="px-4 py-3 border-b-2 font-medium text-sm transition">
                General Info
            </button>
            <button @click="activeTab = 'hazards'" :class="activeTab === 'hazards' ? 'border-blue-500 text-blue-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'" class="px-4 py-3 border-b-2 font-medium text-sm transition">
                Hazards
            </button>
            <button @click="activeTab = 'response'" :class="activeTab === 'response' ? 'border-blue-500 text-blue-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'" class="px-4 py-3 border-b-2 font-medium text-sm transition">
                Response
            </button>
            <button @click="activeTab = 'physical'" :class="activeTab === 'physical' ? 'border-blue-500 text-blue-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'" class="px-4 py-3 border-b-2 font-medium text-sm transition">
                Physical Properties
            </button>
            <button @click="activeTab = 'regulatory'" :class="activeTab === 'regulatory' ? 'border-blue-500 text-blue-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'" class="px-4 py-3 border-b-2 font-medium text-sm transition">
                Regulatory
            </button>
            <button @click="activeTab = 'reactivity'" :class="activeTab === 'reactivity' ? 'border-blue-500 text-blue-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'" class="px-4 py-3 border-b-2 font-medium text-sm transition">
                Reactivity
            </button>
        </nav>
    </div>

    <!-- Tab Content -->
    <div>
        <!-- General Info Tab -->
        <div x-show="activeTab === 'general'" class="space-y-6">
            {% if chemical.description %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3">Description</h3>
                <p class="text-slate-700 leading-relaxed">{{ chemical.description }}</p>
            </div>
            {% endif %}
            
            {% if chemical.synonyms %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3">Synonyms</h3>
                <div class="flex flex-wrap gap-2">
                    {% for synonym in chemical.synonyms.split('|') %}
                    <span class="px-3 py-1 bg-slate-100 text-slate-700 text-sm rounded-full">{{ synonym.strip() }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            {% if chemical.formulas %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3">Chemical Formula</h3>
                <p class="text-2xl font-mono text-blue-600">{{ chemical.formulas }}</p>
                {% if chemical.molwgt_value %}
                <p class="text-sm text-slate-600 mt-2">Molecular Weight: {{ chemical.molwgt_value }} g/mol</p>
                {% endif %}
            </div>
            {% endif %}
            
            {% if chemical.icsc_codes %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3">International Chemical Safety Cards (ICSC)</h3>
                <div class="space-y-2">
                    {% for icsc in chemical.icsc_codes %}
                    <a href="https://www.ilo.org/dyn/icsc/showcard.display?p_card_id={{ icsc.code }}" target="_blank" rel="noopener" class="flex items-center gap-2 text-blue-600 hover:text-blue-700">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                        </svg>
                        ICSC {{ icsc.code }}: {{ icsc.name }}
                    </a>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            
            {% if chemical.chris_codes %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3">CHRIS Code</h3>
                <p class="text-slate-700">{{ chemical.chris_codes }}</p>
            </div>
            {% endif %}
        </div>

        <!-- Hazards Tab -->
        <div x-show="activeTab === 'hazards'" class="space-y-6">
            {% if chemical.special_hazards %}
            <div class="bg-red-50 border-l-4 border-red-500 rounded-lg p-6">
                <div class="flex items-start gap-3">
                    <svg class="w-6 h-6 text-red-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                    <div>
                        <h3 class="text-lg font-semibold text-red-900 mb-2">‚ö†Ô∏è Special Hazards</h3>
                        <p class="text-red-800">{{ chemical.special_hazards }}</p>
                    </div>
                </div>
            </div>
            {% endif %}
            
            {% if chemical.health_haz %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2">
                    <span class="text-2xl">üè•</span>
                    Health Hazards
                </h3>
                <p class="text-slate-700 leading-relaxed whitespace-pre-wrap">{{ chemical.health_haz }}</p>
            </div>
            {% endif %}
            
            {% if chemical.fire_haz %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2">
                    <span class="text-2xl">üî•</span>
                    Fire Hazards
                </h3>
                <p class="text-slate-700 leading-relaxed whitespace-pre-wrap">{{ chemical.fire_haz }}</p>
            </div>
            {% endif %}
            
            {% if chemical.air_water_reactions %}
            <div class="bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-blue-900 mb-3">Air & Water Reactions</h3>
                <p class="text-blue-800">{{ chemical.air_water_reactions }}</p>
            </div>
            {% endif %}
            
            {% if chemical.chemical_profile %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3">Chemical Profile</h3>
                <p class="text-slate-700 leading-relaxed whitespace-pre-wrap">{{ chemical.chemical_profile }}</p>
            </div>
            {% endif %}
        </div>

        <!-- Response Tab -->
        <div x-show="activeTab === 'response'" class="space-y-6">
            {% if chemical.erg_guide %}
            <div class="bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-lg font-semibold text-orange-900 mb-2">Emergency Response Guidebook</h3>
                        <p class="text-orange-700">ERG Guide Number: <span class="font-bold text-xl">{{ chemical.erg_guide }}</span></p>
                    </div>
                    <a href="https://www.phmsa.dot.gov/sites/phmsa.dot.gov/files/docs/ERG2020.pdf#page={{ (chemical.erg_guide | int) + 100 }}" target="_blank" rel="noopener" class="px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 font-semibold flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        Open ERG Guide {{ chemical.erg_guide }}
                    </a>
                </div>
            </div>
            {% endif %}
            
            {% if chemical.isolation %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2">
                    <span class="text-2xl">üöß</span>
                    Isolation and Evacuation
                </h3>
                <p class="text-slate-700 leading-relaxed whitespace-pre-wrap">{{ chemical.isolation }}</p>
            </div>
            {% endif %}
            
            {% if chemical.fire_fight %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2">
                    <span class="text-2xl">üßØ</span>
                    Firefighting
                </h3>
                <p class="text-slate-700 leading-relaxed whitespace-pre-wrap">{{ chemical.fire_fight }}</p>
            </div>
            {% endif %}
            
            {% if chemical.non_fire_resp %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2">
                    <span class="text-2xl">üß™</span>
                    Non-Fire Response
                </h3>
                <p class="text-slate-700 leading-relaxed whitespace-pre-wrap">{{ chemical.non_fire_resp }}</p>
            </div>
            {% endif %}
            
            {% if chemical.first_aid %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2">
                    <span class="text-2xl">üöë</span>
                    First Aid
                </h3>
                <p class="text-slate-700 leading-relaxed whitespace-pre-wrap">{{ chemical.first_aid }}</p>
            </div>
            {% endif %}
            
            {% if chemical.prot_clothing %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-3">Protective Clothing</h3>
                <p class="text-slate-700 leading-relaxed">{{ chemical.prot_clothing }}</p>
            </div>
            {% endif %}
        </div>

        <!-- Physical Properties Tab -->
        <div x-show="activeTab === 'physical'" class="space-y-6">
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                <table class="min-w-full divide-y divide-slate-200">
                    <thead class="bg-slate-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Property</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Value</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Source</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-slate-200">
                        {% if chemical.fp_value is not none %}
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 text-sm font-medium text-slate-900">Flash Point</td>
                            <td class="px-6 py-4 text-sm text-slate-700">{{ chemical.fp_value }}¬∞F{% if chemical.fp_range %} ({{ chemical.fp_range }}){% endif %}</td>
                            <td class="px-6 py-4 text-sm text-slate-500">{{ chemical.fp_source if chemical.fp_source else 'N/A' }}</td>
                        </tr>
                        {% endif %}
                        {% if chemical.bp_value is not none %}
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 text-sm font-medium text-slate-900">Boiling Point</td>
                            <td class="px-6 py-4 text-sm text-slate-700">{{ chemical.bp_value }}¬∞F{% if chemical.bp_range %} ({{ chemical.bp_range }}){% endif %}</td>
                            <td class="px-6 py-4 text-sm text-slate-500">{{ chemical.bp_source if chemical.bp_source else 'N/A' }}</td>
                        </tr>
                        {% endif %}
                        {% if chemical.mp_value is not none %}
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 text-sm font-medium text-slate-900">Melting Point</td>
                            <td class="px-6 py-4 text-sm text-slate-700">{{ chemical.mp_value }}¬∞F{% if chemical.mp_range %} ({{ chemical.mp_range }}){% endif %}</td>
                            <td class="px-6 py-4 text-sm text-slate-500">{{ chemical.mp_source if chemical.mp_source else 'N/A' }}</td>
                        </tr>
                        {% endif %}
                        {% if chemical.sg_value is not none %}
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 text-sm font-medium text-slate-900">Specific Gravity</td>
                            <td class="px-6 py-4 text-sm text-slate-700">
                                {{ chemical.sg_value }}{% if chemical.sg_value_tempDegF %} @ {{ chemical.sg_value_tempDegF }}¬∞F{% endif %}
                                {% if chemical.sg_value < 1.0 %}
                                <span class="ml-2 text-xs text-blue-600 font-medium">(Less dense than water; will float)</span>
                                {% elif chemical.sg_value > 1.0 %}
                                <span class="ml-2 text-xs text-blue-600 font-medium">(Denser than water; will sink)</span>
                                {% endif %}
                            </td>
                            <td class="px-6 py-4 text-sm text-slate-500">{{ chemical.sg_source if chemical.sg_source else 'N/A' }}</td>
                        </tr>
                        {% endif %}
                        {% if chemical.vp_value is not none %}
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 text-sm font-medium text-slate-900">Vapor Pressure</td>
                            <td class="px-6 py-4 text-sm text-slate-700">{{ chemical.vp_value }} {{ chemical.vp_unit if chemical.vp_unit else 'mmHg' }}{% if chemical.vp_value_tempDegF %} @ {{ chemical.vp_value_tempDegF }}¬∞F{% endif %}</td>
                            <td class="px-6 py-4 text-sm text-slate-500">{{ chemical.vp_source if chemical.vp_source else 'N/A' }}</td>
                        </tr>
                        {% endif %}
                        {% if chemical.lel_value is not none %}
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 text-sm font-medium text-slate-900">Lower Explosive Limit (LEL)</td>
                            <td class="px-6 py-4 text-sm text-slate-700">{{ chemical.lel_value }}{{ chemical.lel_unit if chemical.lel_unit else '%' }}</td>
                            <td class="px-6 py-4 text-sm text-slate-500">{{ chemical.lel_source if chemical.lel_source else 'N/A' }}</td>
                        </tr>
                        {% endif %}
                        {% if chemical.uel_value is not none %}
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 text-sm font-medium text-slate-900">Upper Explosive Limit (UEL)</td>
                            <td class="px-6 py-4 text-sm text-slate-700">{{ chemical.uel_value }}{{ chemical.uel_unit if chemical.uel_unit else '%' }}</td>
                            <td class="px-6 py-4 text-sm text-slate-500">{{ chemical.uel_source if chemical.uel_source else 'N/A' }}</td>
                        </tr>
                        {% endif %}
                        {% if chemical.ai_value is not none %}
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 text-sm font-medium text-slate-900">Autoignition Temperature</td>
                            <td class="px-6 py-4 text-sm text-slate-700">{{ chemical.ai_value }}¬∞F</td>
                            <td class="px-6 py-4 text-sm text-slate-500">{{ chemical.ai_source if chemical.ai_source else 'N/A' }}</td>
                        </tr>
                        {% endif %}
                        {% if chemical.molwgt_value is not none %}
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 text-sm font-medium text-slate-900">Molecular Weight</td>
                            <td class="px-6 py-4 text-sm text-slate-700">{{ chemical.molwgt_value }} g/mol</td>
                            <td class="px-6 py-4 text-sm text-slate-500">{{ chemical.molwgt_source if chemical.molwgt_source else 'N/A' }}</td>
                        </tr>
                        {% endif %}
                        {% if chemical.idlh_value is not none %}
                        <tr class="hover:bg-slate-50">
                            <td class="px-6 py-4 text-sm font-medium text-slate-900">IDLH (Immediately Dangerous to Life or Health)</td>
                            <td class="px-6 py-4 text-sm text-slate-700">{{ chemical.idlh_value }} {{ chemical.idlh_unit if chemical.idlh_unit else 'ppm' }}</td>
                            <td class="px-6 py-4 text-sm text-slate-500">{{ chemical.idlh_source if chemical.idlh_source else 'N/A' }}</td>
                        </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Regulatory Tab -->
        <div x-show="activeTab === 'regulatory'" class="space-y-6">
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-4">Regulatory Information</h3>
                <div class="space-y-4">
                    <div class="border-b border-slate-200 pb-4">
                        <p class="text-sm font-semibold text-slate-700 mb-1">EPA Consolidated List of Lists</p>
                        <p class="text-sm text-slate-500">No regulatory information available</p>
                    </div>
                    <div class="border-b border-slate-200 pb-4">
                        <p class="text-sm font-semibold text-slate-700 mb-1">CFATS (Chemical Facility Anti-Terrorism Standards)</p>
                        <p class="text-sm text-slate-500">No regulatory information available</p>
                    </div>
                    <div class="border-b border-slate-200 pb-4">
                        <p class="text-sm font-semibold text-slate-700 mb-1">OSHA Process Safety Management (PSM)</p>
                        <p class="text-sm text-slate-500">{{ chemical.psm if chemical.psm else 'No regulatory information available' }}</p>
                    </div>
                    <div>
                        <p class="text-sm font-semibold text-slate-700 mb-1">EPA AEGL (Acute Exposure Guideline Levels)</p>
                        <p class="text-sm text-slate-500">No regulatory information available</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reactivity Tab -->
        <div x-show="activeTab === 'reactivity'" class="space-y-6">
            {% if chemical.reactive_groups %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h3 class="text-lg font-semibold text-slate-900 mb-4">Belongs to the Following Reactive Group(s)</h3>
                <div class="space-y-3">
                    {% for group in chemical.reactive_groups %}
                    <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                        <p class="font-semibold text-blue-900">{{ group.name }}</p>
                        {% if group.description %}
                        <p class="text-sm text-blue-700 mt-2">{{ group.description }}</p>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% else %}
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <p class="text-slate-500">No reactive group information available</p>
            </div>
            {% endif %}
            
            <div class="bg-amber-50 border border-amber-200 rounded-lg p-6">
                <p class="text-sm text-amber-800">
                    <strong>Note:</strong> Use the Mixer tool to analyze compatibility between this chemical and others.
                </p>
            </div>
        </div>
    </div>

</div>
{% endif %}
{% endblock %}
