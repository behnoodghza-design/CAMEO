ğŸ”¬ ØªØ­Ù„ÛŒÙ„ Ù…Ù‚Ø§ÛŒØ³Ù‡â€ŒØ§ÛŒ Ùˆ ØªÙˆÙ„ÛŒØ¯ Ù…Ø³ØªÙ†Ø¯ Ù†Ù‡Ø§ÛŒÛŒ
Ø§Ø¨ØªØ¯Ø§ Ù‡Ø± Ø¯Ùˆ Ù…Ø³ØªÙ†Ø¯ Ø±Ø§ ØªØ­Ù„ÛŒÙ„ Ù…ÛŒâ€ŒÚ©Ù†Ù… Ùˆ Ø³Ù¾Ø³ Ù…Ø³ØªÙ†Ø¯ Ù†Ù‡Ø§ÛŒÛŒ V5 Ø±Ø§ ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ù….

ğŸ“Š Ø¬Ø¯ÙˆÙ„ Ù…Ù‚Ø§ÛŒØ³Ù‡â€ŒØ§ÛŒ Ø³Ù‡ Ù…Ù†Ø¨Ø¹
text

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Ù…ÙˆØ¶ÙˆØ¹             â”‚   Gemini (V4)     â”‚   Perplexity      â”‚   CAMEO ÙˆØ§Ù‚Ø¹ÛŒ     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ù¾Ø§ÛŒÙ‡ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ            â”‚ Group-based âœ…    â”‚ Chemical-based âŒ â”‚ Group-based âœ…    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ú©Ø¯Ù‡Ø§ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ           â”‚ green/yellow/red  â”‚ compatible/...    â”‚ C / I-C / I / N   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Default (Ø¨Ø¯ÙˆÙ† Ù‚Ø§Ù†ÙˆÙ†)    â”‚ Green âš ï¸ Ø®Ø·Ø±Ù†Ø§Ú©  â”‚ Unknown âœ…        â”‚ No Data (N) âœ…    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Cartesian Product       â”‚ âœ… ØµØ­ÛŒØ­          â”‚ âŒ Ù†Ø¯Ø§Ø±Ø¯          â”‚ âœ… Ø¨Ù„Ù‡            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ØªÙ‚Ø§Ø±Ù†                   â”‚ âœ…               â”‚ âœ…               â”‚ âœ…               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Worst-Case Aggregation  â”‚ âœ…               â”‚ âŒ               â”‚ âœ…               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Special Hazards         â”‚ Ø¬Ø²Ø¦ÛŒ             â”‚ âŒ               â”‚ âœ… Ú©Ø§Ù…Ù„          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Gas Products            â”‚ âœ…               â”‚ âŒ               â”‚ âœ…               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Audit Trail             â”‚ âŒ               â”‚ âœ…               â”‚ -                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Self-Reactivity Check   â”‚ Ø¬Ø²Ø¦ÛŒ             â”‚ âŒ               â”‚ âœ…               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸš¨ Ù…Ø´Ú©Ù„Ø§Øª Ø¨Ø­Ø±Ø§Ù†ÛŒ Ú©Ù‡ Ø¨Ø§ÛŒØ¯ Ø§ØµÙ„Ø§Ø­ Ø´ÙˆÙ†Ø¯
Ù…Ø´Ú©Ù„ Û±: Default Behavior Ø¯Ø± V4 (Ø¨Ø­Ø±Ø§Ù†ÛŒ ğŸ”´)
Python

# âŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ø®Ø·Ø±Ù†Ø§Ú© Ø¯Ø± V4:
if rule is None:
    return GREEN  # "Compatible" - Ø§ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ú©Ø´Ù†Ø¯Ù‡ Ø¨Ø§Ø´Ø¯!

# âœ… ØµØ­ÛŒØ­:
if rule is None:
    return UNKNOWN  # "No Data - Exercise Caution"
Ù…Ø´Ú©Ù„ Û²: Perplexity Ø§Ø² Group Logic Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ú©Ø±Ø¯Ù‡ (Ø¨Ø­Ø±Ø§Ù†ÛŒ ğŸ”´)
Python

# âŒ Ø§Ø´ØªØ¨Ø§Ù‡ Ø¯Ø± Perplexity - Ù…Ø³ØªÙ‚ÛŒÙ… chemicals Ø±Ø§ Ú†Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯:
cursor.execute(
    "SELECT * FROM reactivity_matrix WHERE chemical1_id = ? AND chemical2_id = ?",
    (chem1_id, chem2_id)
)

# âœ… ØµØ­ÛŒØ­ - Ø¨Ø§ÛŒØ¯ Groups Ø±Ø§ Ú†Ú© Ú©Ù†Ø¯:
# 1. Groups of Chemical A Ø±Ø§ Ø¨Ú¯ÛŒØ±
# 2. Groups of Chemical B Ø±Ø§ Ø¨Ú¯ÛŒØ±  
# 3. Ù‡Ù…Ù‡ ØªØ±Ú©ÛŒØ¨â€ŒÙ‡Ø§ÛŒ Ù…Ù…Ú©Ù† Ø±Ø§ Ú†Ú© Ú©Ù†
Ù…Ø´Ú©Ù„ Û³: Ø³Ø§Ø®ØªØ§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ù†Ø§Ø³Ø§Ø²Ú¯Ø§Ø±
Perplexity Ø¬Ø¯ÙˆÙ„ÛŒ Ø¨Ù‡ Ù†Ø§Ù… reactivity_matrix Ø¨Ø§ chemical1_id, chemical2_id Ø¯Ø§Ø±Ø¯ Ú©Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª.
CAMEO ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø² group1_id, group2_id Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

ğŸ“˜ CAMEO_MASTER_LOGIC_SPEC_V5_FINAL.md
Markdown

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#  CAMEO CHEMICALS: MASTER LOGIC SPECIFICATION
#  Ù†Ø³Ø®Ù‡: 5.0 FINAL - Production Ready
#  Ø·Ø¨Ù‚Ù‡â€ŒØ¨Ù†Ø¯ÛŒ: Ù…Ø³ØªÙ†Ø¯ Ø§ÛŒÙ…Ù†ÛŒ-Ø¨Ø­Ø±Ø§Ù†ÛŒ (Safety-Critical Document)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

> âš ï¸ Ù‡Ø´Ø¯Ø§Ø±: Ø§ÛŒÙ† Ù…Ø³ØªÙ†Ø¯ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø¨Ø± Ø§ÛŒÙ…Ù†ÛŒ Ø§Ù†Ø³Ø§Ù†â€ŒÙ‡Ø§ ØªØ£Ø«ÛŒØ± Ù…ÛŒâ€ŒÚ¯Ø°Ø§Ø±Ø¯.
> Ù‡Ø±Ú¯ÙˆÙ†Ù‡ Ø§Ù†Ø­Ø±Ø§Ù Ø§Ø² Ø§ÛŒÙ† Ù…Ù†Ø·Ù‚ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù…Ù†Ø¬Ø± Ø¨Ù‡ Ø­ÙˆØ§Ø¯Ø« Ø®Ø·Ø±Ù†Ø§Ú© Ø´ÙˆØ¯.

---

# ÙØµÙ„ Û±: ÙÙ„Ø³ÙÙ‡ Ùˆ Ø§ØµÙˆÙ„ Ø¨Ù†ÛŒØ§Ø¯ÛŒÙ†

## Û±.Û± Ø§ØµÙ„ Ø·Ù„Ø§ÛŒÛŒ: FAIL-SAFE

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘   ğŸ›¡ï¸  Ù‚Ø§Ù†ÙˆÙ† Ø·Ù„Ø§ÛŒÛŒ: Ø¯Ø± Ø´Ú©ØŒ Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø¯Ù‡!                                        â•‘
â•‘                                                                              â•‘
â•‘   â–¸ Ø¢Ù„Ø§Ø±Ù… Ø§Ø´ØªØ¨Ø§Ù‡ = Ù†Ø§Ø±Ø§Ø­ØªÛŒ Ù…ÙˆÙ‚Øª                                              â•‘
â•‘   â–¸ Ø®Ø·Ø± Ø§Ø² Ø¯Ø³Øª Ø±ÙØªÙ‡ = ÙØ§Ø¬Ø¹Ù‡                                                  â•‘
â•‘                                                                              â•‘
â•‘   âœ Ø­Ø§Ù„Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ = Ù†Ø§Ù…Ø´Ø®Øµ (Ù‡Ø´Ø¯Ø§Ø±) Ù†Ù‡ Ø³Ø¨Ø² (Ø§ÛŒÙ…Ù†)                              â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## Û±.Û² Ù…Ø¯Ù„ Ø±ÛŒØ§Ø¶ÛŒ ØªØ¹Ø§Ù…Ù„Ø§Øª

### ØªØ¹Ø±ÛŒÙ Ù…Ø§Ø¯Ù‡ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ:
Ù‡Ø± Ù…Ø§Ø¯Ù‡ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ C Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒØ§ÛŒ Ø§Ø² Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ± Ø§Ø³Øª:

    C = {Gâ‚, Gâ‚‚, ..., Gâ‚™}    Ú©Ù‡ n â‰¥ 1

### Ù…Ø«Ø§Ù„ ÙˆØ§Ù‚Ø¹ÛŒ:
    Ø§Ø³ÛŒØ¯ Ø³ÙˆÙ„ÙÙˆØ±ÛŒÚ© (Hâ‚‚SOâ‚„):
    â”œâ”€â”€ Group 1:  Acids, Strong Non-oxidizing
    â”œâ”€â”€ Group 21: Oxidizing Agents, Strong  
    â””â”€â”€ Group 104: Water Reactive Substances

### Ø§ØµÙ„ Ø¶Ø±Ø¨ Ø¯Ú©Ø§Ø±ØªÛŒ:
Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ù…Ø§Ø¯Ù‡ A Ùˆ B:

    Reactions(A, B) = â‹ƒ â‹ƒ Rule(gâ‚, gáµ¦)
                     gâ‚âˆˆA gáµ¦âˆˆB

    ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø±Ø±Ø³ÛŒâ€ŒÙ‡Ø§ = |Groups_A| Ã— |Groups_B|

### Ø§ØµÙ„ ØªÙ‚Ø§Ø±Ù†:
    Rule(Gâ‚“, Gáµ§) â‰¡ Rule(Gáµ§, Gâ‚“)
    
    âœ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ÙÙ‚Ø· Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…: group1_id < group2_id

### Ø§ØµÙ„ Ø¨Ø¯ØªØ±ÛŒÙ† Ø­Ø§Ù„Øª:
    Final_Status = MAX(severity of all found rules)
    Final_Hazards = UNION(all hazards)
    Final_Gases = UNION(all gas products)

---

# ÙØµÙ„ Û²: Ú©Ø¯Ù‡Ø§ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ CAMEO

## Û².Û± Ø¬Ø¯ÙˆÙ„ Ú©Ø¯Ù‡Ø§

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Ú©Ø¯     â”‚  Ø§ÙˆÙ„ÙˆÛŒØª   â”‚                    Ù…Ø¹Ù†ÛŒ Ùˆ Ø§Ù‚Ø¯Ø§Ù…                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    C     â”‚     1      â”‚  Compatible - Ù‚Ø§Ø¨Ù„ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ú©Ù†Ø§Ø± Ù‡Ù…                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   I-C    â”‚     2      â”‚  Caution - Ø¨Ø±Ø±Ø³ÛŒ SDSØŒ Ø¬Ø¯Ø§Ø³Ø§Ø²ÛŒ ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    I     â”‚     3      â”‚  Incompatible - Ù†Ø¨Ø§ÛŒØ¯ Ú©Ù†Ø§Ø± Ù‡Ù… Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø´ÙˆÙ†Ø¯ â›”        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    N     â”‚     2      â”‚  No Data - Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³ØªØŒ Ø§Ø­ØªÛŒØ§Ø· Ú©Ù†ÛŒØ¯ âš ï¸        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## Û².Û² Ù†Ú¯Ø§Ø´Øª Ø¨Ù‡ Ø±Ù†Ú¯â€ŒÙ‡Ø§

COMPATIBILITY_CONFIG = {
    'C':   {'priority': 1, 'color': '#22C55E', 'label': 'Ø³Ø§Ø²Ú¯Ø§Ø±',      'action': 'Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ù…Ø¬Ø§Ø²'},
    'I-C': {'priority': 2, 'color': '#EAB308', 'label': 'Ø§Ø­ØªÛŒØ§Ø·',      'action': 'SDS Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯'},
    'I':   {'priority': 3, 'color': '#DC2626', 'label': 'Ù†Ø§Ø³Ø§Ø²Ú¯Ø§Ø±',    'action': 'Ø¬Ø¯Ø§Ø³Ø§Ø²ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ'},
    'N':   {'priority': 2, 'color': '#F97316', 'label': 'Ù†Ø§Ù…Ø´Ø®Øµ',      'action': 'Ø§Ø­ØªÛŒØ§Ø· Ú©Ù†ÛŒØ¯'}
}

---

# ÙØµÙ„ Û³: Ø§Ù†ÙˆØ§Ø¹ Ø®Ø·Ø±Ø§Øª Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø´Ø¯Ù‡

## Û³.Û± Ù„ÛŒØ³Øª Ú©Ø§Ù…Ù„ Ø®Ø·Ø±Ø§Øª CAMEO

â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ú©Ø¯  â”‚    Ù†Ø§Ù… Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ      â”‚           ØªÙˆØ¶ÛŒØ­ ÙØ§Ø±Ø³ÛŒ          â”‚   Ø´Ø¯Øª     â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H01 â”‚ HEAT                â”‚ ØªÙˆÙ„ÛŒØ¯ Ú¯Ø±Ù…Ø§                      â”‚  Ù…ØªÙˆØ³Ø·    â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H02 â”‚ FIRE                â”‚ Ø¢ØªØ´â€ŒØ³ÙˆØ²ÛŒ                         â”‚  Ø¨Ø§Ù„Ø§     â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H03 â”‚ EXPLOSION           â”‚ Ø§Ù†ÙØ¬Ø§Ø±                          â”‚  Ø¨Ø­Ø±Ø§Ù†ÛŒ   â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H04 â”‚ INERT_GAS           â”‚ ØªÙˆÙ„ÛŒØ¯ Ú¯Ø§Ø² Ø¨ÛŒâ€ŒØ§Ø«Ø±                 â”‚  Ù¾Ø§ÛŒÛŒÙ†    â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H05 â”‚ FLAMMABLE_GAS       â”‚ ØªÙˆÙ„ÛŒØ¯ Ú¯Ø§Ø² Ù‚Ø§Ø¨Ù„ Ø§Ø´ØªØ¹Ø§Ù„           â”‚  Ø¨Ø§Ù„Ø§     â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H06 â”‚ TOXIC_GAS           â”‚ ØªÙˆÙ„ÛŒØ¯ Ú¯Ø§Ø² Ø³Ù…ÛŒ                   â”‚  Ø¨Ø­Ø±Ø§Ù†ÛŒ   â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H07 â”‚ CORROSIVE_GAS       â”‚ ØªÙˆÙ„ÛŒØ¯ Ú¯Ø§Ø² Ø®ÙˆØ±Ù†Ø¯Ù‡                â”‚  Ø¨Ø§Ù„Ø§     â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H08 â”‚ TOXIC_SOLUTION      â”‚ ØªÙˆÙ„ÛŒØ¯ Ù…Ø­Ù„ÙˆÙ„ Ø³Ù…ÛŒ                 â”‚  Ø¨Ø§Ù„Ø§     â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H09 â”‚ POLYMERIZATION      â”‚ Ù¾Ù„ÛŒÙ…Ø±ÛŒØ²Ø§Ø³ÛŒÙˆÙ† Ø®Ø·Ø±Ù†Ø§Ú©             â”‚  Ø¨Ø§Ù„Ø§     â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H10 â”‚ VIOLENT_REACTION    â”‚ ÙˆØ§Ú©Ù†Ø´ Ø´Ø¯ÛŒØ¯                      â”‚  Ø¨Ø­Ø±Ø§Ù†ÛŒ   â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ H11 â”‚ SPONTANEOUS_IGNITIONâ”‚ Ø§Ø´ØªØ¹Ø§Ù„ Ø®ÙˆØ¯Ø¨Ù‡â€ŒØ®ÙˆØ¯ÛŒ                â”‚  Ø¨Ø­Ø±Ø§Ù†ÛŒ   â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## Û³.Û² Ø®Ø·Ø±Ø§Øª Ø®Ø§Øµ (Self-Hazards)

Ù…ÙˆØ§Ø¯ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ Ú©Ù‡ Ø¨Ø¯ÙˆÙ† Ø§Ø®ØªÙ„Ø§Ø· Ù†ÛŒØ² Ø®Ø·Ø±Ù†Ø§Ú©Ù†Ø¯:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Ù†ÙˆØ¹ Ø®Ø·Ø±          â”‚                  Ù†Ø­ÙˆÙ‡ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PEROXIDE_FORMER      â”‚ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ ØªØ§Ø±ÛŒØ®ØŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø¯Ø± ØªØ§Ø±ÛŒÚ©ÛŒ                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POLYMERIZABLE        â”‚ Ú©Ù†ØªØ±Ù„ Ø¯Ù…Ø§ØŒ Ø¯ÙˆØ± Ø§Ø² Ù†ÙˆØ±                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PYROPHORIC           â”‚ Ø§ØªÙ…Ø³ÙØ± Ø®Ù†Ø«ÛŒ (Nâ‚‚ ÛŒØ§ Ar)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ WATER_REACTIVE       â”‚ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø®Ø´Ú©                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ AIR_REACTIVE         â”‚ Ø¸Ø±ÙˆÙ Ù…Ù‡Ø±ÙˆÙ…ÙˆÙ…ØŒ Ø§ØªÙ…Ø³ÙØ± Ø®Ù†Ø«ÛŒ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ EXPLOSIVE            â”‚ Ø¨Ø§Ù†Ú©Ø± Ù…Ø®ØµÙˆØµØŒ Ø¯ÙˆØ± Ø§Ø² Ø¶Ø±Ø¨Ù‡ Ùˆ Ø­Ø±Ø§Ø±Øª                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---

# ÙØµÙ„ Û´: Ø·Ø±Ø­ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ (DDL)

## Û´.Û± Ø¬Ø¯ÙˆÙ„ reactive_groups

-- 68 Ú¯Ø±ÙˆÙ‡ ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ± Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ NOAA
CREATE TABLE reactive_groups (
    id INTEGER PRIMARY KEY,                    -- Ø´Ù†Ø§Ø³Ù‡ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ NOAA
    code TEXT UNIQUE NOT NULL,                 -- Ú©Ø¯ Ú©ÙˆØªØ§Ù‡: 'ACID_STRONG_NON_OX'
    name TEXT NOT NULL,                        -- Ù†Ø§Ù… Ú©Ø§Ù…Ù„
    description TEXT,                          -- ØªÙˆØ¶ÛŒØ­Ø§Øª Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ
    example_chemicals TEXT,                    -- Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ (JSON)
    documentation_level INTEGER DEFAULT 2      -- Ø³Ø·Ø­ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† 1-3
);

-- Ù†Ù…ÙˆÙ†Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§:
INSERT INTO reactive_groups (id, code, name) VALUES
(1,   'ACID_STRONG_NON_OX',  'Acids, Strong Non-oxidizing'),
(2,   'ACID_STRONG_OX',      'Acids, Strong Oxidizing'),
(3,   'ACID_CARBOXYLIC',     'Acids, Carboxylic'),
(4,   'ALCOHOL',             'Alcohols and Polyols'),
(5,   'ALDEHYDE',            'Aldehydes'),
(10,  'BASE_STRONG',         'Bases, Strong'),
(11,  'BASE_WEAK',           'Bases, Weak'),
(21,  'OXIDIZER_STRONG',     'Oxidizing Agents, Strong'),
(22,  'OXIDIZER_WEAK',       'Oxidizing Agents, Weak'),
(25,  'CYANIDE',             'Cyanides, Inorganic'),
(37,  'METAL_ALKALI',        'Metals, Alkali (Li, Na, K, etc.)'),
(44,  'REDUCER_STRONG',      'Reducing Agents, Strong'),
(45,  'REDUCER_WEAK',        'Reducing Agents, Weak'),
(51,  'SULFIDE',             'Sulfides, Inorganic'),
(100, 'WATER',               'Water and Aqueous Solutions');

## Û´.Û² Ø¬Ø¯ÙˆÙ„ chemicals

CREATE TABLE chemicals (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    
    -- Ø´Ù†Ø§Ø³Ù‡â€ŒÙ‡Ø§
    name TEXT NOT NULL,
    cas_number TEXT UNIQUE,                    -- Ø´Ù…Ø§Ø±Ù‡ CAS: XXXXXXX-XX-X
    un_number TEXT,                            -- Ø´Ù…Ø§Ø±Ù‡ UN: UN####
    formula TEXT,                              -- ÙØ±Ù…ÙˆÙ„ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ
    
    -- Ø®ØµÙˆØµÛŒØ§Øª ÙÛŒØ²ÛŒÚ©ÛŒ
    molecular_weight REAL,
    physical_state TEXT CHECK(physical_state IN ('solid', 'liquid', 'gas')),
    density REAL,
    melting_point REAL,
    boiling_point REAL,
    flash_point REAL,
    
    -- ØªÙˆØ¶ÛŒØ­Ø§Øª
    description TEXT,
    
    -- Ù…ØªØ§Ø¯ÛŒØªØ§
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_chemicals_name ON chemicals(name);
CREATE INDEX idx_chemicals_cas ON chemicals(cas_number);
CREATE INDEX idx_chemicals_un ON chemicals(un_number);

## Û´.Û³ Ø¬Ø¯ÙˆÙ„ chemical_groups (Junction Table)

-- Ù†Ú¯Ø§Ø´Øª Ú†Ù†Ø¯-Ø¨Ù‡-Ú†Ù†Ø¯ Ø¨ÛŒÙ† Ù…ÙˆØ§Ø¯ Ùˆ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§
CREATE TABLE chemical_groups (
    chemical_id INTEGER NOT NULL,
    group_id INTEGER NOT NULL,
    is_primary BOOLEAN DEFAULT FALSE,          -- Ø¢ÛŒØ§ Ú¯Ø±ÙˆÙ‡ Ø§ØµÙ„ÛŒ Ø§Ø³ØªØŸ
    confidence REAL DEFAULT 1.0,               -- Ø³Ø·Ø­ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† 0.0-1.0
    
    PRIMARY KEY (chemical_id, group_id),
    FOREIGN KEY (chemical_id) REFERENCES chemicals(id) ON DELETE CASCADE,
    FOREIGN KEY (group_id) REFERENCES reactive_groups(id)
);

CREATE INDEX idx_cg_chemical ON chemical_groups(chemical_id);
CREATE INDEX idx_cg_group ON chemical_groups(group_id);

## Û´.Û´ Ø¬Ø¯ÙˆÙ„ reactivity_rules (Ù‚Ù„Ø¨ Ø³ÛŒØ³ØªÙ…)

CREATE TABLE reactivity_rules (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    
    -- Ø¬ÙØª Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ (Ù‡Ù…ÛŒØ´Ù‡ group1_id < group2_id)
    group1_id INTEGER NOT NULL,
    group2_id INTEGER NOT NULL,
    
    -- Ù†ØªÛŒØ¬Ù‡ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ
    compatibility TEXT NOT NULL CHECK (compatibility IN ('C', 'I-C', 'I', 'N')),
    
    -- Ø®Ø·Ø±Ø§Øª (JSON Array)
    hazards_json TEXT NOT NULL DEFAULT '[]',   -- ["HEAT", "FIRE", "TOXIC_GAS"]
    
    -- Ù…Ø­ØµÙˆÙ„Ø§Øª Ú¯Ø§Ø²ÛŒ
    gas_products TEXT,                          -- "HCN, H2S, CO"
    
    -- Ù…ØªØ§Ø¯ÛŒØªØ§
    documentation_level INTEGER DEFAULT 2,      -- 1=ØªØ¦ÙˆØ±ÛŒ, 2=Ù…Ø³ØªÙ†Ø¯, 3=ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù‡
    reference_source TEXT,                      -- Ù…Ù†Ø¨Ø¹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
    notes TEXT,                                 -- ÛŒØ§Ø¯Ø¯Ø§Ø´Øªâ€ŒÙ‡Ø§
    
    -- Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§
    CONSTRAINT enforce_order CHECK (group1_id < group2_id),
    UNIQUE (group1_id, group2_id),
    FOREIGN KEY (group1_id) REFERENCES reactive_groups(id),
    FOREIGN KEY (group2_id) REFERENCES reactive_groups(id)
);

CREATE INDEX idx_rules_lookup ON reactivity_rules(group1_id, group2_id);

## Û´.Ûµ Ø¬Ø¯ÙˆÙ„ special_hazards

CREATE TABLE special_hazards (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    chemical_id INTEGER NOT NULL,
    
    hazard_type TEXT NOT NULL,                 -- PEROXIDE_FORMER, PYROPHORIC, ...
    severity TEXT CHECK(severity IN ('low', 'medium', 'high', 'critical')),
    description TEXT,
    storage_requirements TEXT,
    inspection_interval_days INTEGER,          -- ÙØ§ØµÙ„Ù‡ Ø¨Ø§Ø²Ø±Ø³ÛŒ (Ø±ÙˆØ²)
    expiry_tracking BOOLEAN DEFAULT FALSE,
    
    FOREIGN KEY (chemical_id) REFERENCES chemicals(id) ON DELETE CASCADE
);

CREATE INDEX idx_special_chem ON special_hazards(chemical_id);

## Û´.Û¶ Ø¬Ø¯ÙˆÙ„ audit_log (Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ…Ù†ÛŒ)

CREATE TABLE audit_log (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    action_type TEXT NOT NULL,                 -- 'analyze', 'add', 'remove', 'alert'
    user_id INTEGER,
    
    -- Ø¬Ø²Ø¦ÛŒØ§Øª
    chemical_ids_json TEXT,                    -- [1, 5, 23]
    result_summary TEXT,                       -- 'I', 'C', etc.
    hazards_found_json TEXT,
    
    -- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙÙ†ÛŒ
    ip_address TEXT,
    user_agent TEXT,
    
    FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE INDEX idx_audit_time ON audit_log(timestamp);
CREATE INDEX idx_audit_user ON audit_log(user_id);

---

# ÙØµÙ„ Ûµ: Ù‚ÙˆØ§Ù†ÛŒÙ† ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ (Seed Data)

## Ûµ.Û± ØªØ±Ú©ÛŒØ¨Ø§Øª Ú©Ø´Ù†Ø¯Ù‡ (Lethal Combinations)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- â›” Ø§ÛŒÙ† ØªØ±Ú©ÛŒØ¨Ø§Øª Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ù…Ù†Ø¬Ø± Ø¨Ù‡ Ù…Ø±Ú¯ Ø´ÙˆÙ†Ø¯
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Ø§Ø³ÛŒØ¯ Ù‚ÙˆÛŒ + Ø³ÛŒØ§Ù†ÛŒØ¯ = HCN (Ù‡ÛŒØ¯Ø±ÙˆÚ˜Ù† Ø³ÛŒØ§Ù†ÛŒØ¯ - Ú©Ø´Ù†Ø¯Ù‡)
INSERT INTO reactivity_rules VALUES
(NULL, 1, 25, 'I', '["TOXIC_GAS", "VIOLENT_REACTION"]', 'HCN', 3, 'CAMEO', 'LETHAL: Produces hydrogen cyanide'),
(NULL, 2, 25, 'I', '["TOXIC_GAS", "VIOLENT_REACTION"]', 'HCN', 3, 'CAMEO', 'LETHAL: Produces hydrogen cyanide');

-- Ø§Ø³ÛŒØ¯ Ù‚ÙˆÛŒ + Ø³ÙˆÙ„ÙÛŒØ¯ = H2S (Ù‡ÛŒØ¯Ø±ÙˆÚ˜Ù† Ø³ÙˆÙ„ÙÛŒØ¯ - Ú©Ø´Ù†Ø¯Ù‡)
INSERT INTO reactivity_rules VALUES
(NULL, 1, 51, 'I', '["TOXIC_GAS", "FLAMMABLE_GAS"]', 'H2S', 3, 'CAMEO', 'LETHAL: Produces hydrogen sulfide'),
(NULL, 2, 51, 'I', '["TOXIC_GAS", "FLAMMABLE_GAS"]', 'H2S', 3, 'CAMEO', 'LETHAL: Produces hydrogen sulfide');

## Ûµ.Û² ØªØ±Ú©ÛŒØ¨Ø§Øª Ø§Ù†ÙØ¬Ø§Ø±ÛŒ/Ø¢ØªØ´â€ŒØ²Ø§

-- Ø§Ú©Ø³ÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù‚ÙˆÛŒ + Ø§Ø­ÛŒØ§Ú©Ù†Ù†Ø¯Ù‡ Ù‚ÙˆÛŒ = Ø§Ù†ÙØ¬Ø§Ø±
INSERT INTO reactivity_rules VALUES
(NULL, 21, 44, 'I', '["FIRE", "EXPLOSION", "HEAT"]', NULL, 3, 'CAMEO', 'Violent oxidation-reduction reaction'),
(NULL, 21, 45, 'I', '["FIRE", "HEAT"]', NULL, 3, 'CAMEO', NULL),
(NULL, 22, 44, 'I', '["FIRE", "HEAT"]', NULL, 3, 'CAMEO', NULL);

-- Ø§Ú©Ø³ÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ + Ù…ÙˆØ§Ø¯ Ø¢Ù„ÛŒ
INSERT INTO reactivity_rules VALUES
(NULL, 4, 21, 'I', '["FIRE", "EXPLOSION"]', NULL, 3, 'CAMEO', 'Alcohols + Strong oxidizers'),
(NULL, 5, 21, 'I', '["FIRE", "EXPLOSION"]', NULL, 3, 'CAMEO', 'Aldehydes + Strong oxidizers');

-- Ø§Ø³ÛŒØ¯ + Ø¨Ø§Ø² = ÙˆØ§Ú©Ù†Ø´ Ø§Ú¯Ø²ÙˆØªØ±Ù…ÛŒÚ© Ø´Ø¯ÛŒØ¯
INSERT INTO reactivity_rules VALUES
(NULL, 1, 10, 'I', '["HEAT", "VIOLENT_REACTION"]', NULL, 3, 'CAMEO', 'Neutralization - highly exothermic'),
(NULL, 2, 10, 'I', '["HEAT", "VIOLENT_REACTION", "TOXIC_GAS"]', NULL, 3, 'CAMEO', NULL);

## Ûµ.Û³ ÙˆØ§Ú©Ù†Ø´ Ø¨Ø§ Ø¢Ø¨

-- ÙÙ„Ø²Ø§Øª Ù‚Ù„ÛŒØ§ÛŒÛŒ + Ø¢Ø¨
INSERT INTO reactivity_rules VALUES
(NULL, 37, 100, 'I', '["FIRE", "EXPLOSION", "FLAMMABLE_GAS", "HEAT"]', 'H2', 3, 'CAMEO', 
 'Alkali metals react violently with water producing hydrogen gas');

---

# ÙØµÙ„ Û¶: Ù…ÙˆØªÙˆØ± Ù…Ù†Ø·Ù‚ (Python Implementation)

## Û¶.Û± Ø«ÙˆØ§Ø¨Øª Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
Python

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# config/constants.py
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

from enum import Enum
from dataclasses import dataclass
from typing import Dict, List

class Compatibility(Enum):
    """Ú©Ø¯Ù‡Ø§ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ CAMEO"""
    COMPATIBLE = 'C'
    CAUTION = 'I-C'
    INCOMPATIBLE = 'I'
    NO_DATA = 'N'

class HazardCode(Enum):
    """Ú©Ø¯Ù‡Ø§ÛŒ Ø®Ø·Ø±Ø§Øª"""
    HEAT = 'HEAT'
    FIRE = 'FIRE'
    EXPLOSION = 'EXPLOSION'
    INERT_GAS = 'INERT_GAS'
    FLAMMABLE_GAS = 'FLAMMABLE_GAS'
    TOXIC_GAS = 'TOXIC_GAS'
    CORROSIVE_GAS = 'CORROSIVE_GAS'
    TOXIC_SOLUTION = 'TOXIC_SOLUTION'
    POLYMERIZATION = 'POLYMERIZATION'
    VIOLENT_REACTION = 'VIOLENT_REACTION'
    SPONTANEOUS_IGNITION = 'SPONTANEOUS_IGNITION'

@dataclass
class CompatibilityInfo:
    priority: int          # Ø¨Ø±Ø§ÛŒ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø¯ØªØ±ÛŒÙ† Ø­Ø§Ù„Øª
    color_hex: str        
    color_name: str
    label_fa: str
    label_en: str
    action_required: str

COMPATIBILITY_MAP: Dict[Compatibility, CompatibilityInfo] = {
    Compatibility.COMPATIBLE: CompatibilityInfo(
        priority=1,
        color_hex='#22C55E',
        color_name='green',
        label_fa='Ø³Ø§Ø²Ú¯Ø§Ø±',
        label_en='Compatible',
        action_required='Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ù…Ø¬Ø§Ø² Ø§Ø³Øª'
    ),
    Compatibility.CAUTION: CompatibilityInfo(
        priority=2,
        color_hex='#EAB308',
        color_name='yellow',
        label_fa='Ø§Ø­ØªÛŒØ§Ø·',
        label_en='Caution',
        action_required='SDS Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ØŒ Ø¬Ø¯Ø§Ø³Ø§Ø²ÛŒ ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯'
    ),
    Compatibility.INCOMPATIBLE: CompatibilityInfo(
        priority=3,
        color_hex='#DC2626',
        color_name='red',
        label_fa='Ù†Ø§Ø³Ø§Ø²Ú¯Ø§Ø±',
        label_en='Incompatible',
        action_required='Ù†Ø¨Ø§ÛŒØ¯ Ú©Ù†Ø§Ø± Ù‡Ù… Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø´ÙˆÙ†Ø¯'
    ),
    Compatibility.NO_DATA: CompatibilityInfo(
        priority=2,  # âš ï¸ Ù‡Ù…Ø§Ù†Ù†Ø¯ CAUTION Ø±ÙØªØ§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… (Fail-Safe)
        color_hex='#F97316',
        color_name='orange',
        label_fa='Ù†Ø§Ù…Ø´Ø®Øµ',
        label_en='No Data',
        action_required='Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª - Ø§Ø­ØªÛŒØ§Ø· Ú©Ù†ÛŒØ¯'
    )
}

# Ø´Ù†Ø§Ø³Ù‡â€ŒÙ‡Ø§ÛŒ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ
WATER_GROUP_ID = 100
AIR_GROUP_ID = 101
Û¶.Û² Ú©Ù„Ø§Ø³ Ø§ØµÙ„ÛŒ ReactivityEngine
Python

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# logic/reactivity_engine.py
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import json
import logging
from typing import Dict, List, Set, Optional, Tuple
from dataclasses import dataclass, field
from datetime import datetime
import sqlite3

from config.constants import (
    Compatibility, HazardCode, COMPATIBILITY_MAP, WATER_GROUP_ID
)

logger = logging.getLogger(__name__)

@dataclass
class PairResult:
    """Ù†ØªÛŒØ¬Ù‡ ØªØ­Ù„ÛŒÙ„ ÛŒÚ© Ø¬ÙØª Ù…Ø§Ø¯Ù‡"""
    chem_a_id: int
    chem_b_id: int
    chem_a_name: str
    chem_b_name: str
    compatibility: Compatibility
    hazards: List[str] = field(default_factory=list)
    gas_products: List[str] = field(default_factory=list)
    interaction_details: List[Dict] = field(default_factory=list)
    notes: List[str] = field(default_factory=list)

@dataclass 
class MatrixResult:
    """Ù†ØªÛŒØ¬Ù‡ Ú©Ø§Ù…Ù„ ØªØ­Ù„ÛŒÙ„ Ù…Ø§ØªØ±ÛŒØ³"""
    timestamp: str
    chemical_count: int
    overall_compatibility: Compatibility
    matrix: List[List[Optional[PairResult]]]
    chemicals: List[Dict]
    critical_pairs: List[Dict] = field(default_factory=list)
    warnings: List[str] = field(default_factory=list)
    audit_id: Optional[int] = None


class ReactivityEngine:
    """
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Ù…ÙˆØªÙˆØ± Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ
    Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…ØªØ¯ÙˆÙ„ÙˆÚ˜ÛŒ CAMEO Chemicals (NOAA)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    âš ï¸ Ù‡Ø´Ø¯Ø§Ø± Ø§ÛŒÙ…Ù†ÛŒ:
    Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø± ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø§Ø³ØªØŒ Ù†Ù‡ ØªØ¶Ù…ÛŒÙ†.
    Ù‡Ù…ÛŒØ´Ù‡ SDS Ùˆ Ù†Ø¸Ø± Ú©Ø§Ø±Ø´Ù†Ø§Ø³ Ø±Ø§ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ú©Ù†ÛŒØ¯.
    """
    
    def __init__(self, db_path: str):
        self.db_path = db_path
        self._rule_cache: Dict[Tuple[int, int], Dict] = {}
        self._group_cache: Dict[int, List[int]] = {}
        logger.info(f"ReactivityEngine initialized with database: {db_path}")
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ØªÙˆØ§Ø¨Ø¹ Ø®ØµÙˆØµÛŒ (Private Methods)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    
    def _get_connection(self) -> sqlite3.Connection:
        """Ø§ÛŒØ¬Ø§Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³"""
        conn = sqlite3.connect(self.db_path)
        conn.row_factory = sqlite3.Row
        return conn
    
    def _normalize_pair(self, g1: int, g2: int) -> Tuple[int, int]:
        """
        Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ø´Ù†Ø§Ø³Ù‡ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ ÛŒÚ©ØªØ§
        Ù‡Ù…ÛŒØ´Ù‡ (Ú©ÙˆÚ†Ú©ØªØ±ØŒ Ø¨Ø²Ø±Ú¯ØªØ±) Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯
        """
        return (min(g1, g2), max(g1, g2))
    
    def _get_chemical_groups(self, chemical_id: int) -> List[int]:
        """
        Ø¯Ø±ÛŒØ§ÙØª ØªÙ…Ø§Ù… Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ± ÛŒÚ© Ù…Ø§Ø¯Ù‡
        Ø§Ø² Ú©Ø´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ø¨Ø±Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ
        """
        if chemical_id in self._group_cache:
            return self._group_cache[chemical_id]
        
        conn = self._get_connection()
        cursor = conn.cursor()
        
        cursor.execute(
            "SELECT group_id FROM chemical_groups WHERE chemical_id = ?",
            (chemical_id,)
        )
        
        groups = [row['group_id'] for row in cursor.fetchall()]
        conn.close()
        
        if not groups:
            logger.warning(f"âš ï¸ Chemical ID {chemical_id} has no reactive groups assigned!")
        
        self._group_cache[chemical_id] = groups
        return groups
    
    def _get_rule(self, group1_id: int, group2_id: int) -> Dict:
        """
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ”´ ØªØ§Ø¨Ø¹ Ø¨Ø­Ø±Ø§Ù†ÛŒ Ø§ÛŒÙ…Ù†ÛŒ (SAFETY-CRITICAL FUNCTION)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        Ø¯Ø±ÛŒØ§ÙØª Ù‚Ø§Ù†ÙˆÙ† Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ø¬ÙØª Ú¯Ø±ÙˆÙ‡
        
        âš ï¸ Ù†Ú©ØªÙ‡ Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ù…:
        Ø§Ú¯Ø± Ù‚Ø§Ù†ÙˆÙ† Ù…ÙˆØ¬ÙˆØ¯ Ù†Ø¨Ø§Ø´Ø¯ØŒ NO_DATA Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†ÛŒÙ… Ù†Ù‡ COMPATIBLE!
        Ø§ÛŒÙ† Ø±ÙØªØ§Ø± Fail-Safe Ø§Ø³Øª.
        """
        normalized = self._normalize_pair(group1_id, group2_id)
        
        # Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø´
        if normalized in self._rule_cache:
            return self._rule_cache[normalized]
        
        # Ø§Ú¯Ø± Ù‡Ø± Ø¯Ùˆ Ú¯Ø±ÙˆÙ‡ ÛŒÚ©ÛŒ Ù‡Ø³ØªÙ†Ø¯ = Ø³Ø§Ø²Ú¯Ø§Ø±
        if group1_id == group2_id:
            result = {
                'compatibility': Compatibility.COMPATIBLE,
                'hazards': [],
                'gas_products': [],
                'notes': 'Same reactive group'
            }
            self._rule_cache[normalized] = result
            return result
        
        # Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
        conn = self._get_connection()
        cursor = conn.cursor()
        
        cursor.execute(
            """
            SELECT compatibility, hazards_json, gas_products, notes
            FROM reactivity_rules
            WHERE group1_id = ? AND group2_id = ?
            """,
            normalized
        )
        
        row = cursor.fetchone()
        conn.close()
        
        if row is None:
            # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            # ğŸ”´ FAIL-SAFE: Ø¨Ø¯ÙˆÙ† Ø¯Ø§Ø¯Ù‡ = Ù†Ø§Ù…Ø´Ø®ØµØŒ Ù†Ù‡ Ø³Ø§Ø²Ú¯Ø§Ø±!
            # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            logger.warning(
                f"âš ï¸ No reactivity rule for groups {normalized}. "
                f"Treating as NO_DATA (Caution level) for safety."
            )
            result = {
                'compatibility': Compatibility.NO_DATA,
                'hazards': [],
                'gas_products': [],
                'notes': 'No reactivity data in database - exercise caution'
            }
        else:
            result = {
                'compatibility': Compatibility(row['compatibility']),
                'hazards': json.loads(row['hazards_json']) if row['hazards_json'] else [],
                'gas_products': row['gas_products'].split(',') if row['gas_products'] else [],
                'notes': row['notes'] or ''
            }
        
        self._rule_cache[normalized] = result
        return result
    
    def _get_special_hazards(self, chemical_id: int) -> List[Dict]:
        """Ø¯Ø±ÛŒØ§ÙØª Ø®Ø·Ø±Ø§Øª Ø®Ø§Øµ ÛŒÚ© Ù…Ø§Ø¯Ù‡ (Self-Hazards)"""
        conn = self._get_connection()
        cursor = conn.cursor()
        
        cursor.execute(
            """
            SELECT hazard_type, severity, description, storage_requirements
            FROM special_hazards
            WHERE chemical_id = ?
            """,
            (chemical_id,)
        )
        
        hazards = [
            {
                'type': row['hazard_type'],
                'severity': row['severity'],
                'description': row['description'],
                'storage': row['storage_requirements']
            }
            for row in cursor.fetchall()
        ]
        
        conn.close()
        return hazards
    
    def _analyze_pair(
        self, 
        chem_a_id: int, 
        chem_b_id: int,
        chem_a_name: str,
        chem_b_name: str,
        groups_a: List[int], 
        groups_b: List[int]
    ) -> PairResult:
        """
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ØªØ­Ù„ÛŒÙ„ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨ÛŒÙ† Ø¯Ùˆ Ù…Ø§Ø¯Ù‡
        
        Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ù…Ù†Ø·Ù‚ Cartesian Product Ø±Ø§ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:
        Ù‡Ù…Ù‡ ØªØ±Ú©ÛŒØ¨â€ŒÙ‡Ø§ÛŒ Ù…Ù…Ú©Ù† Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ A Ø¨Ø§ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ B Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        """
        result = PairResult(
            chem_a_id=chem_a_id,
            chem_b_id=chem_b_id,
            chem_a_name=chem_a_name,
            chem_b_name=chem_b_name,
            compatibility=Compatibility.COMPATIBLE  # Ø´Ø±ÙˆØ¹ Ø®ÙˆØ´â€ŒØ¨ÛŒÙ†Ø§Ù†Ù‡
        )
        
        max_priority = 1  # Ø´Ø±ÙˆØ¹ Ø¨Ø§ Compatible (Ø§ÙˆÙ„ÙˆÛŒØª 1)
        all_hazards: Set[str] = set()
        all_gases: Set[str] = set()
        
        # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        # Edge Case: Ù…Ø§Ø¯Ù‡ Ø¨Ø¯ÙˆÙ† Ú¯Ø±ÙˆÙ‡
        # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        if not groups_a or not groups_b:
            result.compatibility = Compatibility.NO_DATA
            result.notes.append("ÛŒÚ© ÛŒØ§ Ù‡Ø± Ø¯Ùˆ Ù…Ø§Ø¯Ù‡ ÙØ§Ù‚Ø¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú¯Ø±ÙˆÙ‡ ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ± Ù‡Ø³ØªÙ†Ø¯")
            logger.warning(f"Missing group data for chemicals {chem_a_id} or {chem_b_id}")
            return result
        
        # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        # ğŸ”„ Ø­Ù„Ù‚Ù‡ Ø¶Ø±Ø¨ Ø¯Ú©Ø§Ø±ØªÛŒ (CARTESIAN PRODUCT LOOP)
        # Ø§ÛŒÙ† Ù‚Ù„Ø¨ Ø§ØµÙ„ÛŒ Ù…Ù†Ø·Ù‚ CAMEO Ø§Ø³Øª
        # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        for g_a in groups_a:
            for g_b in groups_b:
                rule = self._get_rule(g_a, g_b)
                
                rule_priority = COMPATIBILITY_MAP[rule['compatibility']].priority
                
                # Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø¨Ø¯ØªØ±ÛŒÙ† Ø­Ø§Ù„Øª
                if rule_priority > max_priority:
                    max_priority = rule_priority
                
                # Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ù‡Ù…Ù‡ Ø®Ø·Ø±Ø§Øª
                all_hazards.update(rule['hazards'])
                all_gases.update(rule['gas_products'])
                
                # Ø«Ø¨Øª Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨Ø±Ø§ÛŒ Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ
                if rule['compatibility'] != Compatibility.COMPATIBLE:
                    result.interaction_details.append({
                        'group_a_id': g_a,
                        'group_b_id': g_b,
                        'compatibility': rule['compatibility'].value,
                        'hazards': rule['hazards'],
                        'gases': rule['gas_products']
                    })
        
        # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        # ØªØ¹ÛŒÛŒÙ† Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ (Ø¨Ø¯ØªØ±ÛŒÙ† Ø­Ø§Ù„Øª)
        # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        for compat, info in COMPATIBILITY_MAP.items():
            if info.priority == max_priority:
                result.compatibility = compat
                break
        
        result.hazards = list(all_hazards)
        result.gas_products = list(all_gases)
        
        # Ø§Ú¯Ø± Ù†Ø§Ø³Ø§Ø²Ú¯Ø§Ø± Ø§Ø³ØªØŒ Ù„Ø§Ú¯ ÙˆÛŒÚ˜Ù‡
        if result.compatibility == Compatibility.INCOMPATIBLE:
            logger.warning(
                f"â›” INCOMPATIBLE: {chem_a_name} + {chem_b_name} "
                f"| Hazards: {result.hazards} | Gases: {result.gas_products}"
            )
        
        return result
    
    def _save_audit_log(
        self, 
        chemical_ids: List[int], 
        result: MatrixResult,
        user_id: Optional[int] = None
    ) -> int:
        """Ø°Ø®ÛŒØ±Ù‡ Ù„Ø§Ú¯ Ø¨Ø±Ø±Ø³ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø§ÛŒÙ…Ù†ÛŒ"""
        conn = self._get_connection()
        cursor = conn.cursor()
        
        cursor.execute(
            """
            INSERT INTO audit_log 
            (action_type, user_id, chemical_ids_json, result_summary, hazards_found_json)
            VALUES (?, ?, ?, ?, ?)
            """,
            (
                'analyze',
                user_id,
                json.dumps(chemical_ids),
                result.overall_compatibility.value,
                json.dumps([h for pair in result.matrix for cell in pair if cell for h in cell.hazards])
            )
        )
        
        conn.commit()
        audit_id = cursor.lastrowid
        conn.close()
        
        logger.info(f"Audit log saved with ID: {audit_id}")
        return audit_id
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ØªÙˆØ§Ø¨Ø¹ Ø¹Ù…ÙˆÙ…ÛŒ (Public API)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    
    def analyze(
        self, 
        chemical_ids: List[int],
        include_water_check: bool = True,
        user_id: Optional[int] = None
    ) -> MatrixResult:
        """
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ”¬ ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ ØªØ­Ù„ÛŒÙ„ - PUBLIC API
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        ØªØ­Ù„ÛŒÙ„ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ N Ù…Ø§Ø¯Ù‡ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ Ùˆ ØªÙˆÙ„ÛŒØ¯ Ù…Ø§ØªØ±ÛŒØ³ NÃ—N
        
        Args:
            chemical_ids: Ù„ÛŒØ³Øª Ø´Ù†Ø§Ø³Ù‡ Ù…ÙˆØ§Ø¯ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ
            include_water_check: Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ø§ Ø¢Ø¨
            user_id: Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø± (Ø¨Ø±Ø§ÛŒ Ù„Ø§Ú¯)
        
        Returns:
            MatrixResult: Ù†ØªÛŒØ¬Ù‡ Ú©Ø§Ù…Ù„ Ø´Ø§Ù…Ù„ Ù…Ø§ØªØ±ÛŒØ³ Ùˆ Ø®Ù„Ø§ØµÙ‡
        
        Raises:
            ValueError: Ø§Ú¯Ø± Ú©Ù…ØªØ± Ø§Ø² 2 Ù…Ø§Ø¯Ù‡ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯
        """
        n = len(chemical_ids)
        
        if n < 2:
            raise ValueError("Ø­Ø¯Ø§Ù‚Ù„ 2 Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ Ù„Ø§Ø²Ù… Ø§Ø³Øª")
        
        if n > 20:
            logger.warning(f"âš ï¸ Large analysis: {n} chemicals = {n*n} matrix cells")
        
        logger.info(f"Starting analysis for {n} chemicals: {chemical_ids}")
        
        # Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ù†ØªÛŒØ¬Ù‡
        result = MatrixResult(
            timestamp=datetime.utcnow().isoformat() + 'Z',
            chemical_count=n,
            overall_compatibility=Compatibility.COMPATIBLE,
            matrix=[[None] * n for _ in range(n)],
            chemicals=[]
        )
        
        # Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…ÙˆØ§Ø¯ Ùˆ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§
        conn = self._get_connection()
        cursor = conn.cursor()
        
        chem_groups: Dict[int, List[int]] = {}
        chem_names: Dict[int, str] = {}
        
        for chem_id in chemical_ids:
            # Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø§Ø¯Ù‡
            cursor.execute(
                "SELECT id, name, cas_number, formula FROM chemicals WHERE id = ?",
                (chem_id,)
            )
            row = cursor.fetchone()
            
            if row:
                result.chemicals.append({
                    'id': row['id'],
                    'name': row['name'],
                    'cas': row['cas_number'],
                    'formula': row['formula']
                })
                chem_names[chem_id] = row['name']
            else:
                logger.error(f"Chemical ID {chem_id} not found in database!")
                result.warnings.append(f"Ù…Ø§Ø¯Ù‡ Ø¨Ø§ Ø´Ù†Ø§Ø³Ù‡ {chem_id} ÛŒØ§ÙØª Ù†Ø´Ø¯")
                chem_names[chem_id] = f"Unknown ({chem_id})"
            
            # Ø¯Ø±ÛŒØ§ÙØª Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§
            chem_groups[chem_id] = self._get_chemical_groups(chem_id)
        
        conn.close()
        
        # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        # ğŸ”„ Ø­Ù„Ù‚Ù‡ Ø§ØµÙ„ÛŒ Ø³Ø§Ø®Øª Ù…Ø§ØªØ±ÛŒØ³
        # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        overall_max_priority = 1
        
        for i in range(n):
            for j in range(n):
                chem_a_id = chemical_ids[i]
                chem_b_id = chemical_ids[j]
                
                if i == j:
                    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                    # Ù‚Ø·Ø± Ø§ØµÙ„ÛŒ: Self-Interaction
                    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                    special = self._get_special_hazards(chem_a_id)
                    
                    if special:
                        # Ù…Ø§Ø¯Ù‡ Ø¯Ø§Ø±Ø§ÛŒ Ø®Ø·Ø± Ø®Ø§Øµ Ø§Ø³Øª
                        self_result = PairResult(
                            chem_a_id=chem_a_id,
                            chem_b_id=chem_a_id,
                            chem_a_name=chem_names[chem_a_id],
                            chem_b_name=chem_names[chem_a_id],
                            compatibility=Compatibility.CAUTION,
                            hazards=[h['type'] for h in special],
                            notes=[h['description'] for h in special if h['description']]
                        )
                        result.warnings.append(
                            f"âš ï¸ {chem_names[chem_a_id]} Ø¯Ø§Ø±Ø§ÛŒ Ø®Ø·Ø± Ø®Ø§Øµ: {', '.join(self_result.hazards)}"
                        )
                    else:
                        self_result = PairResult(
                            chem_a_id=chem_a_id,
                            chem_b_id=chem_a_id,
                            chem_a_name=chem_names[chem_a_id],
                            chem_b_name=chem_names[chem_a_id],
                            compatibility=Compatibility.COMPATIBLE
                        )
                    
                    result.matrix[i][j] = self_result
                
                elif i < j:
                    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                    # Ù…Ø«Ù„Ø« Ø¨Ø§Ù„Ø§: ØªØ­Ù„ÛŒÙ„ Ø¬ÙØª
                    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                    pair_result = self._analyze_pair(
                        chem_a_id, chem_b_id,
                        chem_names[chem_a_id], chem_names[chem_b_id],
                        chem_groups[chem_a_id], chem_groups[chem_b_id]
                    )
                    
                    # Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Ù…Ø§ØªØ±ÛŒØ³ (Ù‡Ù… [i][j] Ùˆ Ù‡Ù… [j][i] - ØªÙ‚Ø§Ø±Ù†)
                    result.matrix[i][j] = pair_result
                    result.matrix[j][i] = pair_result
                    
                    # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¨Ø¯ØªØ±ÛŒÙ† Ø­Ø§Ù„Øª Ú©Ù„ÛŒ
                    priority = COMPATIBILITY_MAP[pair_result.compatibility].priority
                    if priority > overall_max_priority:
                        overall_max_priority = priority
                    
                    # Ø«Ø¨Øª Ø¬ÙØªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ
                    if pair_result.compatibility == Compatibility.INCOMPATIBLE:
                        result.critical_pairs.append({
                            'chemicals': [chem_names[chem_a_id], chem_names[chem_b_id]],
                            'hazards': pair_result.hazards,
                            'gases': pair_result.gas_products,
                            'details': pair_result.interaction_details
                        })
        
        # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        # Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ø§ Ø¢Ø¨ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
        # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        if include_water_check:
            for chem_id in chemical_ids:
                groups = chem_groups[chem_id]
                for g in groups:
                    water_rule = self._get_rule(g, WATER_GROUP_ID)
                    if water_rule['compatibility'] in (Compatibility.INCOMPATIBLE, Compatibility.CAUTION):
                        result.warnings.append(
                            f"ğŸ’§ {chem_names[chem_id]} ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ± Ø¨Ø§ Ø¢Ø¨ Ø§Ø³Øª - "
                            f"Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø¯Ø± Ø´Ø±Ø§ÛŒØ· Ø®Ø´Ú© Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª"
                        )
                        break
        
        # ØªØ¹ÛŒÛŒÙ† Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ú©Ù„ÛŒ
        for compat, info in COMPATIBILITY_MAP.items():
            if info.priority == overall_max_priority:
                result.overall_compatibility = compat
                break
        
        # Ø°Ø®ÛŒØ±Ù‡ Ù„Ø§Ú¯
        result.audit_id = self._save_audit_log(chemical_ids, result, user_id)
        
        logger.info(
            f"Analysis complete: Overall={result.overall_compatibility.value}, "
            f"Critical pairs={len(result.critical_pairs)}, Warnings={len(result.warnings)}"
        )
        
        return result
    
    def get_compatibility_info(self, compatibility: Compatibility) -> CompatibilityInfo:
        """Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù†Ù…Ø§ÛŒØ´ÛŒ ÛŒÚ© Ø³Ø·Ø­ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ"""
        return COMPATIBILITY_MAP[compatibility]
    
    def clear_cache(self):
        """Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ú©Ø´ (Ù¾Ø³ Ø§Ø² Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³)"""
        self._rule_cache.clear()
        self._group_cache.clear()
        logger.info("Cache cleared")
    
    def get_statistics(self) -> Dict:
        """Ø¢Ù…Ø§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³"""
        conn = self._get_connection()
        cursor = conn.cursor()
        
        stats = {}
        
        cursor.execute("SELECT COUNT(*) FROM chemicals")
        stats['total_chemicals'] = cursor.fetchone()[0]
        
        cursor.execute("SELECT COUNT(*) FROM reactive_groups")
        stats['total_groups'] = cursor.fetchone()[0]
        
        cursor.execute("SELECT COUNT(*) FROM reactivity_rules")
        stats['total_rules'] = cursor.fetchone()[0]
        
        cursor.execute("SELECT COUNT(*) FROM reactivity_rules WHERE compatibility = 'I'")
        stats['incompatible_rules'] = cursor.fetchone()[0]
        
        conn.close()
        return stats
ÙØµÙ„ Û·: API Ù…Ø´Ø®ØµØ§Øª (Flask Routes)
Û·.Û± Endpoint Ø§ØµÙ„ÛŒ ØªØ­Ù„ÛŒÙ„
Python

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# routes/reactivity.py
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

from flask import Blueprint, request, jsonify
from logic.reactivity_engine import ReactivityEngine, MatrixResult
from config.constants import COMPATIBILITY_MAP

reactivity_bp = Blueprint('reactivity', __name__)
engine = ReactivityEngine('cameo_chemicals.db')

@reactivity_bp.route('/api/v1/analyze', methods=['POST'])
def analyze_chemicals():
    """
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    POST /api/v1/analyze
    Ø¨Ø±Ø±Ø³ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ù…ÙˆØ§Ø¯ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    Request Body:
    {
        "chemical_ids": [1, 5, 23],
        "options": {
            "include_water_check": true
        }
    }
    
    Response:
    {
        "success": true,
        "data": { ... }
    }
    """
    try:
        data = request.get_json()
        
        if not data or 'chemical_ids' not in data:
            return jsonify({
                'success': False,
                'error': {
                    'code': 'MISSING_CHEMICAL_IDS',
                    'message': 'Ù„ÛŒØ³Øª Ø´Ù†Ø§Ø³Ù‡ Ù…ÙˆØ§Ø¯ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª'
                }
            }), 400
        
        chemical_ids = data['chemical_ids']
        options = data.get('options', {})
        
        # ØªØ­Ù„ÛŒÙ„
        result: MatrixResult = engine.analyze(
            chemical_ids=chemical_ids,
            include_water_check=options.get('include_water_check', True)
        )
        
        # ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ JSON-friendly
        compat_info = COMPATIBILITY_MAP[result.overall_compatibility]
        
        response = {
            'success': True,
            'data': {
                'meta': {
                    'timestamp': result.timestamp,
                    'chemical_count': result.chemical_count,
                    'audit_id': result.audit_id
                },
                'overall': {
                    'compatibility': result.overall_compatibility.value,
                    'label': compat_info.label_fa,
                    'color': compat_info.color_hex,
                    'action': compat_info.action_required
                },
                'chemicals': result.chemicals,
                'matrix': [
                    [
                        {
                            'compatibility': cell.compatibility.value if cell else None,
                            'hazards': cell.hazards if cell else [],
                            'gases': cell.gas_products if cell else [],
                            'color': COMPATIBILITY_MAP[cell.compatibility].color_hex if cell else '#6B7280'
                        }
                        for cell in row
                    ]
                    for row in result.matrix
                ],
                'critical_pairs': result.critical_pairs,
                'warnings': result.warnings
            }
        }
        
        return jsonify(response)
    
    except ValueError as e:
        return jsonify({
            'success': False,
            'error': {
                'code': 'VALIDATION_ERROR',
                'message': str(e)
            }
        }), 400
    
    except Exception as e:
        logger.error(f"Analysis error: {e}", exc_info=True)
        return jsonify({
            'success': False,
            'error': {
                'code': 'INTERNAL_ERROR',
                'message': 'Ø®Ø·Ø§ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ø³Ø±ÙˆØ±'
            }
        }), 500
ÙØµÙ„ Û¸: ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ
Û¸.Û± ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø­Ø¯
Python

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# tests/test_reactivity_engine.py
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

import pytest
from logic.reactivity_engine import ReactivityEngine
from config.constants import Compatibility

class TestReactivityEngine:
    """Ù…Ø¬Ù…ÙˆØ¹Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØªÙˆØ± ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ±ÛŒ"""
    
    @pytest.fixture
    def engine(self, test_db):
        return ReactivityEngine(test_db)
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ Ø§ÛŒÙ…Ù†ÛŒ
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    
    def test_acid_base_must_be_incompatible(self, engine):
        """Ø§Ø³ÛŒØ¯ + Ø¨Ø§Ø² Ø¨Ø§ÛŒØ¯ Ù†Ø§Ø³Ø§Ø²Ú¯Ø§Ø± Ø¨Ø§Ø´Ø¯"""
        result = engine.analyze([ACID_ID, BASE_ID])
        
        assert result.overall_compatibility == Compatibility.INCOMPATIBLE
        assert 'HEAT' in result.matrix[0][1].hazards
        assert 'VIOLENT_REACTION' in result.matrix[0][1].hazards
    
    def test_acid_cyanide_produces_hcn(self, engine):
        """Ø§Ø³ÛŒØ¯ Ù‚ÙˆÛŒ + Ø³ÛŒØ§Ù†ÛŒØ¯ Ø¨Ø§ÛŒØ¯ HCN ØªÙˆÙ„ÛŒØ¯ Ú©Ù†Ø¯"""
        result = engine.analyze([STRONG_ACID_ID, CYANIDE_ID])
        
        assert result.overall_compatibility == Compatibility.INCOMPATIBLE
        assert 'TOXIC_GAS' in result.matrix[0][1].hazards
        assert 'HCN' in result.matrix[0][1].gas_products
    
    def test_missing_rule_returns_no_data_not_compatible(self, engine):
        """
        ğŸ”´ ØªØ³Øª Ø¨Ø­Ø±Ø§Ù†ÛŒ: Ù‚Ø§Ù†ÙˆÙ† Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§ÛŒØ¯ NO_DATA Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯ØŒ Ù†Ù‡ COMPATIBLE
        """
        result = engine.analyze([RARE_CHEM_1, RARE_CHEM_2])
        
        # Ù†Ø¨Ø§ÛŒØ¯ COMPATIBLE Ø¨Ø§Ø´Ø¯!
        assert result.overall_compatibility != Compatibility.COMPATIBLE
        assert result.overall_compatibility in (Compatibility.NO_DATA, Compatibility.CAUTION)
    
    def test_symmetry_is_maintained(self, engine):
        """Ù…Ø§ØªØ±ÛŒØ³ Ø¨Ø§ÛŒØ¯ Ù…ØªÙ‚Ø§Ø±Ù† Ø¨Ø§Ø´Ø¯: M[i][j] == M[j][i]"""
        result = engine.analyze([CHEM_A, CHEM_B, CHEM_C])
        
        n = len(result.matrix)
        for i in range(n):
            for j in range(n):
                assert result.matrix[i][j].compatibility == result.matrix[j][i].compatibility
    
    def test_cartesian_product_is_exhaustive(self, engine):
        """ØªÙ…Ø§Ù… ØªØ±Ú©ÛŒØ¨â€ŒÙ‡Ø§ÛŒ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ø±Ø±Ø³ÛŒ Ø´ÙˆÙ†Ø¯"""
        # Ù…Ø§Ø¯Ù‡ A: 2 Ú¯Ø±ÙˆÙ‡ØŒ Ù…Ø§Ø¯Ù‡ B: 3 Ú¯Ø±ÙˆÙ‡
        # Ø¨Ø§ÛŒØ¯ 2Ã—3 = 6 ØªØ±Ú©ÛŒØ¨ Ø¨Ø±Ø±Ø³ÛŒ Ø´ÙˆØ¯
        result = engine.analyze([MULTI_GROUP_A, MULTI_GROUP_B])
        
        # ØªØ¹Ø¯Ø§Ø¯ Ø¬Ø²Ø¦ÛŒØ§Øª ØªØ¹Ø§Ù…Ù„ Ø¨Ø§ÛŒØ¯ â‰¤ 6 Ø¨Ø§Ø´Ø¯
        # (Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ø±Ø®ÛŒ Compatible Ø¨Ø§Ø´Ù†Ø¯ Ùˆ Ø«Ø¨Øª Ù†Ø´ÙˆÙ†Ø¯)
        assert len(result.matrix[0][1].interaction_details) <= 6
    
    def test_water_reactivity_warning_generated(self, engine):
        """Ù…ÙˆØ§Ø¯ ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ± Ø¨Ø§ Ø¢Ø¨ Ø¨Ø§ÛŒØ¯ Ù‡Ø´Ø¯Ø§Ø± ØªÙˆÙ„ÛŒØ¯ Ú©Ù†Ù†Ø¯"""
        result = engine.analyze([SODIUM_METAL_ID, SAFE_CHEM_ID], include_water_check=True)
        
        water_warnings = [w for w in result.warnings if 'Ø¢Ø¨' in w or 'water' in w.lower()]
        assert len(water_warnings) > 0
    
    def test_self_hazard_on_diagonal(self, engine):
        """Ø®Ø·Ø±Ø§Øª Ø®Ø§Øµ Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ù‚Ø·Ø± Ø§ØµÙ„ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆÙ†Ø¯"""
        result = engine.analyze([PEROXIDE_FORMER_ID, SAFE_CHEM_ID])
        
        diagonal_cell = result.matrix[0][0]
        assert diagonal_cell.compatibility == Compatibility.CAUTION
        assert 'PEROXIDE_FORMER' in diagonal_cell.hazards
    
    def test_critical_pairs_are_logged(self, engine):
        """Ø¬ÙØªâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ø³Ø§Ø²Ú¯Ø§Ø± Ø¨Ø§ÛŒØ¯ Ø¯Ø± critical_pairs Ø«Ø¨Øª Ø´ÙˆÙ†Ø¯"""
        result = engine.analyze([ACID_ID, CYANIDE_ID])
        
        assert len(result.critical_pairs) > 0
        assert any('HCN' in str(pair['gases']) for pair in result.critical_pairs)
    
    def test_audit_log_is_created(self, engine):
        """Ù‡Ø± ØªØ­Ù„ÛŒÙ„ Ø¨Ø§ÛŒØ¯ Ø¯Ø± audit_log Ø«Ø¨Øª Ø´ÙˆØ¯"""
        result = engine.analyze([CHEM_A, CHEM_B])
        
        assert result.audit_id is not None
        assert result.audit_id > 0
ÙØµÙ„ Û¹: Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø§Ø³ØªÙ‚Ø±Ø§Ø±
âœ… Ù‚Ø¨Ù„ Ø§Ø² Production
text

â–¡ ØªÙ…Ø§Ù… 68 Ú¯Ø±ÙˆÙ‡ ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ± Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª
â–¡ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø¨Ø­Ø±Ø§Ù†ÛŒ (Ø§Ø³ÛŒØ¯+Ø³ÛŒØ§Ù†ÛŒØ¯ØŒ Ø§Ú©Ø³ÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡+Ø§Ø­ÛŒØ§Ú©Ù†Ù†Ø¯Ù‡ØŒ ...) ØªØ³Øª Ø´Ø¯Ù‡
â–¡ Ø±ÙØªØ§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¨Ø±Ø§ÛŒ Ù‚ÙˆØ§Ù†ÛŒÙ† Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯ = NO_DATA (Ù†Ù‡ COMPATIBLE)
â–¡ ØªÙ‚Ø§Ø±Ù† Ù…Ø§ØªØ±ÛŒØ³ Ø¯Ø± Ù‡Ù…Ù‡ Ø®Ø±ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ Ø¨Ø±Ù‚Ø±Ø§Ø± Ø§Ø³Øª
â–¡ Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ§Ú©Ù†Ø´â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ø§ Ø¢Ø¨ Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ ÙØ¹Ø§Ù„ Ø§Ø³Øª
â–¡ Audit logging ÙØ¹Ø§Ù„ Ùˆ ØªØ³Øª Ø´Ø¯Ù‡
â–¡ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø­Ø¯ Ù¾Ø§Ø³ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ (100%)
â–¡ ØªØ³Øª ÛŒÚ©Ù¾Ø§Ø±Ú†Ú¯ÛŒ Ø¨Ø§ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ÙˆØ§Ù‚Ø¹ÛŒ CAMEO Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡
â–¡ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ø±Ø§ÛŒ Ù…Ø§ØªØ±ÛŒØ³ 20Ã—20 Ú©Ù…ØªØ± Ø§Ø² 1 Ø«Ø§Ù†ÛŒÙ‡ Ø§Ø³Øª
â–¡ Error handling Ù…Ø­Ø§ÙØ¸Ù‡â€ŒÚ©Ø§Ø±Ø§Ù†Ù‡ (Fail-Safe) Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡
ÙØµÙ„ Û±Û°: Ù…Ø±Ø¬Ø¹ Ø³Ø±ÛŒØ¹
text

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         Ù…Ø±Ø¬Ø¹ Ø³Ø±ÛŒØ¹ Ú©Ø¯Ù‡Ø§ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                              â•‘
â•‘   C   = Ø³Ø§Ø²Ú¯Ø§Ø± (Ø³Ø¨Ø²)       â† Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ú©Ù†Ø§Ø± Ù‡Ù… Ù…Ø¬Ø§Ø²                           â•‘
â•‘   I-C = Ø§Ø­ØªÛŒØ§Ø· (Ø²Ø±Ø¯)       â† SDS Ø¨Ø±Ø±Ø³ÛŒ Ø´ÙˆØ¯ØŒ Ø¬Ø¯Ø§Ø³Ø§Ø²ÛŒ ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯           â•‘
â•‘   I   = Ù†Ø§Ø³Ø§Ø²Ú¯Ø§Ø± (Ù‚Ø±Ù…Ø²)    â† Ù†Ø¨Ø§ÛŒØ¯ Ú©Ù†Ø§Ø± Ù‡Ù… Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø´ÙˆÙ†Ø¯ â›”                   â•‘
â•‘   N   = Ù†Ø§Ù…Ø´Ø®Øµ (Ù†Ø§Ø±Ù†Ø¬ÛŒ)    â† Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³ØªØŒ Ø§Ø­ØªÛŒØ§Ø· Ú©Ù†ÛŒØ¯ âš ï¸              â•‘
â•‘                                                                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                    ØªØ±Ú©ÛŒØ¨Ø§Øª Ø¨Ø­Ø±Ø§Ù†ÛŒ (Ù‡Ù…ÛŒØ´Ù‡ Ù‚Ø±Ù…Ø²)                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                              â•‘
â•‘   â€¢ Ø§Ø³ÛŒØ¯ Ù‚ÙˆÛŒ + Ø³ÛŒØ§Ù†ÛŒØ¯        â†’ Ú¯Ø§Ø² HCN (Ú©Ø´Ù†Ø¯Ù‡) â˜ ï¸                           â•‘
â•‘   â€¢ Ø§Ø³ÛŒØ¯ Ù‚ÙˆÛŒ + Ø³ÙˆÙ„ÙÛŒØ¯        â†’ Ú¯Ø§Ø² Hâ‚‚S (Ø³Ù…ÛŒ)                               â•‘
â•‘   â€¢ Ø§Ø³ÛŒØ¯ Ù‚ÙˆÛŒ + Ø¨Ø§Ø² Ù‚ÙˆÛŒ       â†’ ÙˆØ§Ú©Ù†Ø´ Ø§Ú¯Ø²ÙˆØªØ±Ù…ÛŒÚ© Ø´Ø¯ÛŒØ¯                        â•‘
â•‘   â€¢ Ø§Ú©Ø³ÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ + Ø§Ø­ÛŒØ§Ú©Ù†Ù†Ø¯Ù‡   â†’ Ø¢ØªØ´/Ø§Ù†ÙØ¬Ø§Ø± ğŸ”¥                                â•‘
â•‘   â€¢ Ø§Ú©Ø³ÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ + Ù…ÙˆØ§Ø¯ Ø¢Ù„ÛŒ    â†’ Ø¢ØªØ´/Ø§Ù†ÙØ¬Ø§Ø±                                  â•‘
â•‘   â€¢ ÙÙ„Ø²Ø§Øª Ù‚Ù„ÛŒØ§ÛŒÛŒ + Ø¢Ø¨        â†’ Ú¯Ø§Ø² Hâ‚‚ + Ø¢ØªØ´                                â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ù¾Ø§ÛŒØ§Ù† Ù…Ø³ØªÙ†Ø¯ Ù†Ø³Ø®Ù‡ 5.0 FINAL

Ù‡Ø´ Ø³Ù†Ø¯: [SHA-256 Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´ÙˆØ¯]
ØªØ£ÛŒÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡: Ù…Ø³Ø¦ÙˆÙ„ Ø§ÛŒÙ…Ù†ÛŒ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ Ø³Ø§Ø²Ù…Ø§Ù†

text


---

## ğŸ“‹ Ø®Ù„Ø§ØµÙ‡ ØªØºÛŒÛŒØ±Ø§Øª Ø§ØµÙ„ÛŒ Ù†Ø³Ø¨Øª Ø¨Ù‡ V4 Ùˆ Perplexity

| # | Ù…ÙˆØ±Ø¯ | V4 (Gemini) | Perplexity | V5 (Ù†Ù‡Ø§ÛŒÛŒ) |
|---|------|-------------|------------|------------|
| 1 | Default Behavior | ğŸ”´ Green | âœ… Unknown | âœ… NO_DATA (Fail-Safe) |
| 2 | Ú©Ø¯Ù‡Ø§ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ | green/yellow/red | compatible/caution | âœ… C/I-C/I/N (CAMEO) |
| 3 | Ù…Ù†Ø·Ù‚ Ø§ØµÙ„ÛŒ | âœ… Group-based | âŒ Chemical-based | âœ… Group-based |
| 4 | Cartesian Product | âœ… Ø¨Ù„Ù‡ | âŒ Ø®ÛŒØ± | âœ… Ú©Ø§Ù…Ù„ |
| 5 | Audit Trail | âŒ Ù†Ø¯Ø§Ø±Ø¯ | âœ… Ø¯Ø§Ø±Ø¯ | âœ… Ú©Ø§Ù…Ù„ |
| 6 | Water Check | âœ… Ø¬Ø²Ø¦ÛŒ | âŒ Ù†Ø¯Ø§Ø±Ø¯ | âœ… Ú©Ø§Ù…Ù„ |
| 7 | Self-Hazards | âœ… Ø¬Ø²Ø¦ÛŒ | âŒ Ù†Ø¯Ø§Ø±Ø¯ | âœ… Ú©Ø§Ù…Ù„ |
| 8 | Gas Products | âœ… Ø¯Ø§Ø±Ø¯ | âŒ Ù†Ø¯Ø§Ø±Ø¯ | âœ… Ú©Ø§Ù…Ù„ |
| 9 | Critical Pairs | âŒ Ù†Ø¯Ø§Ø±Ø¯ | âŒ Ù†Ø¯Ø§Ø±Ø¯ | âœ… Ø¬Ø¯ÛŒØ¯ |
| 10 | Severity Levels | Ø³Ø§Ø¯Ù‡ | Ø³Ø§Ø¯Ù‡ | âœ… 4 Ø³Ø·Ø­ |
